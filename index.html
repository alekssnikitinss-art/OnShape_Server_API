<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OnShape BOM Manager</title>
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ OnShape BOM & Bounding Box Manager</h1>
        
        <div class="section">
            <h2>ğŸ” Authentication</h2>
            <div id="userInfo" class="user-info" style="display:none">
                <div>
                    <strong>Logged in as:</strong> <span id="userEmail"></span>
                </div>
                <button onclick="logout()" style="padding: 8px 16px; font-size: 14px;">Logout</button>
            </div>
            <div class="button-group">
                <button id="loginBtn">ğŸ” Login with OnShape</button>
                <button id="loadSavedBtn">ğŸ“‚ Load Saved Documents</button>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“„ Document Information</h2>
            <div class="grid-2">
                <div class="input-group">
                    <label for="documentId">Document ID:</label>
                    <input type="text" id="documentId" placeholder="e.g., 5f4b3c2a1e0d9c8b7a6f5e4d">
                </div>
                <div class="input-group">
                    <label for="workspaceId">Workspace ID:</label>
                    <input type="text" id="workspaceId" placeholder="e.g., 1a2b3c4d5e6f7g8h9i0j">
                </div>
            </div>
            <div class="input-group">
                <label for="elementId">Element ID (Assembly/Part Studio):</label>
                <input type="text" id="elementId" placeholder="e.g., 9z8y7x6w5v4u3t2s1r0q">
            </div>
            <div class="button-group">
                <button id="getDocsBtn">ğŸ“ List My Documents</button>
                <button id="getElemsBtn">ğŸ“„ Get Elements</button>
                <button id="saveDocBtn">ğŸ’¾ Save This Document</button>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“Š Data Operations</h2>
            <div class="toggle-group">
                <label><strong>BOM Format:</strong></label>
                <button class="toggle-btn active" id="flatBtn" onclick="setBomFormat('flat')">Flattened</button>
                <button class="toggle-btn" id="structBtn" onclick="setBomFormat('structured')">Structured</button>
            </div>
            <div class="button-group">
                <button id="getBomBtn">ğŸ“Š Get BOM</button>
                <button id="getBboxBtn">ğŸ“ Get Bounding Boxes</button>
                <button id="getVarsBtn">ğŸ”¢ Get Configuration Variables</button>
                <button id="previewLengthsBtn">ğŸ‘ï¸ Preview Length Properties</button>
                <button id="createLengthPropsBtn">ğŸ“ Create Length Properties</button>
                <button class="push-btn" id="syncVarsBtn" style="display:none">ğŸ”„ Sync Variables to Properties</button>
                <button class="push-btn" id="pushBomBtn" style="display:none">â¬†ï¸ Push BOM to OnShape</button>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“¤ Upload & Edit</h2>
            <div class="input-group">
                <label for="fileUpload">Upload CSV or JSON File:</label>
                <input type="file" id="fileUpload" accept=".csv,.json">
            </div>
            <div class="button-group">
                <button id="clearBtn">ğŸ—‘ï¸ Clear All Data</button>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ“¥ Results & Export</h2>
            <div class="button-group">
                <button class="download-btn" id="downloadJsonBtn">â¬‡ï¸ Download JSON</button>
                <button class="download-btn" id="downloadCsvBtn">â¬‡ï¸ Download CSV</button>
            </div>
            <div id="results">No data yet. Login and fetch data or upload a file!</div>
        </div>
    </div>

    <script src="static/js/api.js"></script>
    <script src="static/js/ui.js"></script>
    <script src="static/js/app.js"></script>
</body>
</html>
